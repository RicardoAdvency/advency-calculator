<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ricardo Ortiz — Consultor Solar</title>
  <meta name="description" content="Casos reales en Puerto Rico. Toca tu pueblo y cotiza en 60 segundos con Ricardo Ortiz — Consultor Solar." />

  <style>
    :root{
      --bg:#ffffff;
      --text:#0b1220;
      --muted:#667085;
      --line:#e9eef5;

      --accent:#111827;     /* negro elegante */
      --solar:#f59e0b;      /* acento solar */
      --solar2:#fb923c;

      --card:#ffffff;
      --soft:#f7f9fc;

      --shadow: 0 20px 60px rgba(15, 23, 42, .08);
      --shadow2: 0 12px 30px rgba(15, 23, 42, .06);

      --r: 18px;
      --max: 1120px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--max);margin:0 auto;padding:22px 18px 90px}

    /* Nav */
    .nav{
      position:sticky; top:0; z-index:30;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,.72);
      border-bottom: 1px solid rgba(233,238,245,.8);
    }
    .navInner{
      max-width:var(--max);
      margin:0 auto;
      padding: 14px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:14px;
    }
    .brand{display:flex; align-items:center; gap:12px; min-width: 250px}
    .mark{
      width:40px;height:40px;border-radius: 999px;
      background: linear-gradient(135deg,var(--solar) 0%, var(--solar2) 100%);
      display:grid;place-items:center;
      font-weight:900; color:#111;
      box-shadow: 0 12px 24px rgba(245,158,11,.18);
    }
    .brand h1{
      margin:0;
      font-size:13px;
      font-weight:900;
      letter-spacing:.7px;
      text-transform:uppercase;
    }
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}
    .links{
      display:flex; gap:14px; align-items:center; flex-wrap:wrap;
      color:var(--muted);
      font-weight:700; font-size:13px;
    }
    .links a{padding:10px 10px;border-radius:999px}
    .links a:hover{background:var(--soft); color:var(--text)}
    .cta{display:flex; gap:10px; align-items:center; flex-wrap:wrap}

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding: 12px 14px;
      border:1px solid var(--line);
      border-radius: 999px;
      background:#fff;
      font-weight:800;
      letter-spacing:.2px;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      box-shadow: 0 1px 0 rgba(15,23,42,.02);
    }
    .btn:hover{transform: translateY(-1px); box-shadow: var(--shadow2)}
    .btn:active{transform: translateY(0px)}
    .btn.primary{
      border-color: transparent;
      background: linear-gradient(135deg,var(--solar) 0%, var(--solar2) 100%);
      color:#111;
    }
    .btn.dark{
      border-color: transparent;
      background: var(--accent);
      color:#fff;
    }

    /* Hero */
    .hero{
      margin-top: 16px;
      border:1px solid var(--line);
      border-radius: 26px;
      overflow:hidden;
      box-shadow: var(--shadow);
      background:#0b1220;
      min-height: 640px;
      position:relative;
    }
    .hero video{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      transform: scale(1.02);
      filter: contrast(1.04) saturate(1.02);
    }
    .hero::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 520px at 18% 25%, rgba(245,158,11,.22) 0%, rgba(245,158,11,0) 60%),
        linear-gradient(90deg, rgba(11,18,32,.88) 0%, rgba(11,18,32,.58) 44%, rgba(11,18,32,.12) 100%);
      pointer-events:none;
    }
    .heroInner{
      position:relative;
      z-index:2;
      padding: 62px 46px;
      min-height: 640px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 26px;
      align-items:end;
    }
    .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      border-radius: 999px;
      font-weight:800;
      width: fit-content;
    }
    .chip .dot{width:8px;height:8px;border-radius:999px;background:var(--solar)}
    .hero h2{
      margin:14px 0 0;
      color:#fff;
      font-size: 54px;
      line-height: 1.02;
      letter-spacing: .2px;
    }
    .lead{
      margin: 14px 0 0;
      color: rgba(255,255,255,.84);
      font-size: 15px;
      line-height: 1.65;
      max-width: 640px;
    }
    .heroActions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 18px;
    }
    .heroNote{
      margin-top: 12px;
      color: rgba(255,255,255,.72);
      font-size: 12px;
      line-height: 1.55;
    }

    .side{
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:flex-end;
      justify-content:flex-end;
      padding-bottom: 6px;
    }
    .glass{
      width: 340px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color:#fff;
      backdrop-filter: blur(10px);
      border-radius: 18px;
      padding: 14px 14px;
      box-shadow: 0 14px 30px rgba(0,0,0,.14);
    }
    .glass strong{display:block;font-weight:900;letter-spacing:.2px}
    .glass p{margin:8px 0 0;font-size:12px;color:rgba(255,255,255,.86);line-height:1.5}
    .miniList{margin-top:10px;display:grid;gap:8px;font-size:12px;color:rgba(255,255,255,.92)}
    .miniItem{display:flex;gap:10px;align-items:flex-start}
    .tick{width:10px;height:10px;background:var(--solar);border-radius:3px;margin-top:4px}

    /* Sections */
    .section{
      margin-top: 28px;
      padding-top: 22px;
      border-top:1px solid var(--line);
    }
    .head{
      display:flex; justify-content:space-between; align-items:flex-end; gap:14px;
      flex-wrap:wrap;
    }
    .head h3{margin:0;font-size:18px;letter-spacing:.2px}
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
      max-width: 780px;
    }

    /* Cards + grid */
    .grid2{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    .card{
      border:1px solid var(--line);
      border-radius: var(--r);
      padding: 16px;
      background: var(--card);
      box-shadow: var(--shadow2);
    }

    /* Map */
    .mapTitle{
      display:flex;justify-content:space-between;align-items:center;gap:10px;
      font-weight:900;
    }
    .hint{font-size:12px;color:var(--muted);font-weight:700}
    .island{
      margin-top:12px;
      height: 380px;
      border:1px solid var(--line);
      border-radius: 16px;
      background:
        radial-gradient(600px 260px at 40% 40%, rgba(245,158,11,.10) 0%, rgba(245,158,11,0) 60%),
        radial-gradient(520px 240px at 70% 70%, rgba(16,185,129,.08) 0%, rgba(16,185,129,0) 60%),
        #fff;
      position:relative;
      overflow:hidden;
    }
    .pin{
      position:absolute;
      width:18px;height:18px;
      border-radius:999px;
      border: 2px solid #111;
      background: linear-gradient(135deg,var(--solar) 0%, var(--solar2) 100%);
      transform: translate(-50%,-50%);
      cursor:pointer;
      box-shadow: 0 14px 28px rgba(15,23,42,.16);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .pin:hover{transform: translate(-50%,-50%) scale(1.06)}
    .pin.active{box-shadow: 0 18px 36px rgba(15,23,42,.22)}
    .label{
      position:absolute;
      transform: translate(-50%,-50%);
      top: calc(var(--y) + 18px);
      left: var(--x);
      font-size:11px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:999px;
      padding: 6px 8px;
      color: var(--text);
      box-shadow: 0 14px 28px rgba(15,23,42,.08);
      opacity:0;
      pointer-events:none;
      transition: opacity .12s ease;
      white-space:nowrap;
    }
    .pin:hover + .label{opacity:1}

    /* Case */
    .caseTop{display:flex;justify-content:space-between;align-items:flex-start;gap:12px}
    .caseTitle{font-weight:900;font-size:16px}
    .caseSub{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.5}
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:14px}
    .kpi{
      border:1px solid var(--line);
      border-radius: 16px;
      padding: 12px;
      background:#fff;
    }
    .kpi .t{
      font-size:11px;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:.35px;
      font-weight:900;
    }
    .kpi .v{margin-top:6px;font-weight:900}
    .bullets{
      margin-top:14px;
      padding-top:12px;
      border-top:1px solid var(--line);
      display:grid;
      gap:10px;
      font-size:13px;
      line-height:1.5;
    }
    .b{display:flex;gap:10px;align-items:flex-start}
    .b i{width:10px;height:10px;background:var(--solar);border-radius:3px;margin-top:5px;flex:0 0 auto}

    /* Reviews */
    .reviews{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap: 12px;
    }
    .rev{
      border:1px solid var(--line);
      border-radius: var(--r);
      padding: 14px;
      background:#fff;
      box-shadow: var(--shadow2);
    }
    .stars{letter-spacing:2px;color:#111;font-size:12px}
    .rev p{margin:10px 0 0;font-size:13px;line-height:1.55}
    .who{margin-top:12px;color:var(--muted);font-size:12px;font-weight:900;text-transform:uppercase;letter-spacing:.3px}

    /* Form */
    .formGrid{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 14px;
    }
    .step{
      border:1px solid var(--line);
      border-radius: var(--r);
      padding: 16px;
      background:#fff;
      box-shadow: var(--shadow2);
    }
    .stepHead{
      display:flex;justify-content:space-between;align-items:center;gap:10px;
      padding-bottom:12px;margin-bottom:14px;border-bottom:1px solid var(--line);
    }
    .tag{
      font-size:11px;
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:.25px;
      background:#fff;
    }
    label{
      display:block;
      font-size:11px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:.35px;
      text-transform:uppercase;
      margin-bottom:8px;
    }
    input,select{
      width:100%;
      padding: 12px 12px;
      border:1px solid var(--line);
      border-radius: 16px;
      font-size:14px;
      outline:none;
      background:#fff;
    }
    input:focus,select:focus{
      border-color: rgba(245,158,11,.55);
      box-shadow: 0 0 0 4px rgba(245,158,11,.14);
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .stack{display:grid;gap:12px}
    .hidden{display:none !important}
    .consent{
      display:flex;gap:10px;align-items:flex-start;
      font-size:12px;color:var(--muted);line-height:1.35;
    }
    .consent input{width:18px;height:18px;margin-top:2px}

    .success{
      border:1px solid rgba(16,185,129,.25);
      background: rgba(16,185,129,.06);
      border-radius: var(--r);
      padding: 14px;
    }
    .success strong{display:block}
    .success p{margin:8px 0 0;color:var(--muted);font-size:13px;line-height:1.5}

    .foot{
      margin-top: 28px;
      border-top:1px solid var(--line);
      padding-top: 16px;
      display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;
      color:var(--muted);
      font-size:12px;
    }

    /* Small screens */
    @media (max-width: 980px){
      .heroInner{grid-template-columns:1fr; padding: 50px 22px}
      .hero h2{font-size:44px}
      .side{align-items:flex-start}
      .glass{width:100%}
      .grid2{grid-template-columns:1fr}
      .reviews{grid-template-columns:1fr}
      .formGrid{grid-template-columns:1fr}
      .links{display:none}
    }
  </style>
</head>

<body>

  <!-- NAV -->
  <div class="nav">
    <div class="navInner">
      <div class="brand">
        <div class="mark">RO</div>
        <div>
          <h1>Ricardo Ortiz — Consultor Solar</h1>
          <p>Puerto Rico • Evaluación rápida • WhatsApp</p>
        </div>
      </div>

      <div class="links">
        <a href="#casos">Casos</a>
        <a href="#reviews">Comentarios</a>
        <a href="#cotiza">Cotiza</a>
      </div>

      <div class="cta">
        <a class="btn" href="#casos">Ver casos</a>
        <a class="btn primary" href="#cotiza">Cotiza en 60s</a>
      </div>
    </div>
  </div>

  <div class="wrap">

    <!-- HERO -->
    <section class="hero" id="inicio">
      <!-- IMPORTANTE: hero.mp4 debe estar al lado de index.html -->
      <video autoplay muted loop playsinline preload="metadata">
        <source src="./hero.mp4" type="video/mp4" />
      </video>

      <div class="heroInner">
        <div>
          <div class="chip"><span class="dot"></span>Casos reales • Puerto Rico</div>
          <h2>Resultados cerca de ti.<br/>Toca tu pueblo.</h2>
          <p class="lead">
            Selecciona tu pueblo para ver un caso destacado (rápido y claro) y completa una evaluación corta para tu estimado.
          </p>

          <div class="heroActions">
            <a class="btn primary" href="#casos">Ver casos por pueblo</a>
            <a class="btn dark" href="#cotiza">Cotiza en 60 segundos</a>
          </div>

          <div class="heroNote">
            *Resultados varían según consumo, techo, sombras, equipos y diseño del sistema.
          </div>
        </div>

        <div class="side">
          <div class="glass">
            <strong>Evaluación honesta</strong>
            <p>Te explico lo que aplica para tu casa y tus objetivos — sin presión.</p>
          </div>

          <div class="glass">
            <strong>Enfoque en estabilidad</strong>
            <p>Si quieres backup, definimos cargas críticas y prioridades.</p>
            <div class="miniList">
              <div class="miniItem"><div class="tick"></div><div>Proceso claro</div></div>
              <div class="miniItem"><div class="tick"></div><div>WhatsApp rápido</div></div>
              <div class="miniItem"><div class="tick"></div><div>Estimado en 60s</div></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CASOS -->
    <section class="section" id="casos">
      <div class="head">
        <div>
          <h3>Casos por pueblo</h3>
          <div class="sub">Toca un pueblo: se actualiza el caso destacado y el formulario se prellena.</div>
        </div>
        <a class="btn primary" href="#cotiza">Cotizar</a>
      </div>

      <div class="grid2">
        <!-- MAP -->
        <div class="card">
          <div class="mapTitle">
            <div>Mapa — Puerto Rico</div>
            <div class="hint">Toca un pin</div>
          </div>

          <div class="island" id="island">
            <!-- Pins (posiciones aproximadas) -->
            <button class="pin active" data-town="San Juan" style="left:72%; top:32%;" aria-label="San Juan"></button>
            <div class="label" style="--x:72%; --y:32%;">San Juan</div>

            <button class="pin" data-town="Bayamón" style="left:68%; top:36%;" aria-label="Bayamón"></button>
            <div class="label" style="--x:68%; --y:36%;">Bayamón</div>

            <button class="pin" data-town="Carolina" style="left:76%; top:34%;" aria-label="Carolina"></button>
            <div class="label" style="--x:76%; --y:34%;">Carolina</div>

            <button class="pin" data-town="Caguas" style="left:72%; top:42%;" aria-label="Caguas"></button>
            <div class="label" style="--x:72%; --y:42%;">Caguas</div>

            <button class="pin" data-town="Ponce" style="left:56%; top:70%;" aria-label="Ponce"></button>
            <div class="label" style="--x:56%; --y:70%;">Ponce</div>

            <button class="pin" data-town="Mayagüez" style="left:25%; top:55%;" aria-label="Mayagüez"></button>
            <div class="label" style="--x:25%; --y:55%;">Mayagüez</div>

            <button class="pin" data-town="Arecibo" style="left:42%; top:36%;" aria-label="Arecibo"></button>
            <div class="label" style="--x:42%; --y:36%;">Arecibo</div>

            <button class="pin" data-town="Humacao" style="left:83%; top:52%;" aria-label="Humacao"></button>
            <div class="label" style="--x:83%; --y:52%;">Humacao</div>

            <button class="pin" data-town="Coamo" style="left:60%; top:62%;" aria-label="Coamo"></button>
            <div class="label" style="--x:60%; --y:62%;">Coamo</div>
          </div>

          <div class="sub" style="margin-top:12px;">
            *Mapa simplificado para velocidad. Puedes añadir más pueblos luego.
          </div>
        </div>

        <!-- CASE -->
        <div class="card" aria-live="polite">
          <div class="caseTop">
            <div>
              <div class="caseTitle" id="caseTown">San Juan — Caso destacado</div>
              <div class="caseSub" id="caseSub">Hogar residencial • Evaluación típica • Ajuste por consumo y techo.</div>
            </div>
            <a class="btn primary" id="caseCTA" href="#cotiza">Cotizar para San Juan</a>
          </div>

          <div class="kpis">
            <div class="kpi">
              <div class="t">Perfil</div>
              <div class="v" id="kpiProfile">Residencial</div>
            </div>
            <div class="kpi">
              <div class="t">Meta</div>
              <div class="v" id="kpiGoal">Backup + ahorro</div>
            </div>
            <div class="kpi">
              <div class="t">Rango factura</div>
              <div class="v" id="kpiBill">$250–$400</div>
            </div>
          </div>

          <div class="bullets" id="caseBullets">
            <div class="b"><i></i><div>Prioridad: estabilidad durante apagones y reducir dependencia de LUMA.</div></div>
            <div class="b"><i></i><div>Se revisa consumo, cargas críticas y condición del techo.</div></div>
            <div class="b"><i></i><div>Diseño personalizado; batería opcional según necesidad.</div></div>
          </div>

          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn dark" href="#cotiza">Ver si aplica en mi casa</a>
            <a class="btn" href="#reviews">Ver comentarios</a>
          </div>
        </div>
      </div>
    </section>

    <!-- REVIEWS -->
    <section class="section" id="reviews">
      <div class="head">
        <div>
          <h3>Comentarios</h3>
          <div class="sub">Corto y creíble. Edita textos con testimonios reales cuando los tengas.</div>
        </div>
      </div>

      <div class="reviews">
        <div class="rev">
          <div class="stars">★★★★★</div>
          <p>“Me explicó con calma y con números reales. Sin presión. Eso se agradece.”</p>
          <div class="who">Caguas</div>
        </div>
        <div class="rev">
          <div class="stars">★★★★★</div>
          <p>“El seguimiento por WhatsApp fue rápido. Me orientó claro sobre opciones.”</p>
          <div class="who">Carolina</div>
        </div>
        <div class="rev">
          <div class="stars">★★★★★</div>
          <p>“Me ayudó a entender si me convenía y cómo sería el proceso paso a paso.”</p>
          <div class="who">Ponce</div>
        </div>
      </div>

      <div class="sub" style="margin-top:12px;">
        *Resultados varían según consumo, techo, sombras, equipos y diseño.
      </div>
    </section>

    <!-- FORM -->
    <section class="section" id="cotiza">
      <div class="head">
        <div>
          <h3>Cotiza en 60 segundos</h3>
          <div class="sub">2 pasos para subir conversión + botón WhatsApp prellenado.</div>
        </div>
      </div>

      <div class="formGrid">
        <!-- Step 1 -->
        <div class="step" id="step1">
          <div class="stepHead">
            <strong>Paso 1 — Información rápida</strong>
            <div class="tag">30s</div>
          </div>

          <div class="stack">
            <div>
              <label for="name">Nombre</label>
              <input id="name" type="text" placeholder="Ej. María Rivera" autocomplete="name" />
            </div>

            <div class="row">
              <div>
                <label for="town">Pueblo</label>
                <select id="town">
                  <option>San Juan</option><option>Bayamón</option><option>Carolina</option><option>Caguas</option>
                  <option>Ponce</option><option>Mayagüez</option><option>Arecibo</option><option>Humacao</option><option>Coamo</option>
                  <option>Otro</option>
                </select>
              </div>
              <div>
                <label for="bill">Factura LUMA (rango)</label>
                <select id="bill">
                  <option value="0-150">$0–$150</option>
                  <option value="150-250">$150–$250</option>
                  <option value="250-400" selected>$250–$400</option>
                  <option value="400+">$400+</option>
                </select>
              </div>
            </div>

            <button class="btn primary" id="toStep2" type="button">Continuar</button>
            <div class="sub">Usamos esto para orientarte mejor. No spam.</div>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="step hidden" id="step2">
          <div class="stepHead">
            <strong>Paso 2 — Contacto</strong>
            <div class="tag">30s</div>
          </div>

          <div class="stack">
            <div class="row">
              <div>
                <label for="phone">Teléfono</label>
                <input id="phone" type="tel" placeholder="787-___-____" autocomplete="tel" />
              </div>
              <div>
                <label for="pref">Preferencia</label>
                <select id="pref">
                  <option value="whatsapp" selected>WhatsApp</option>
                  <option value="llamada">Llamada</option>
                </select>
              </div>
            </div>

            <label class="consent">
              <input id="consent" type="checkbox" />
              <span>Autorizo a Ricardo Ortiz a contactarme para una evaluación solar. (No spam.)</span>
            </label>

            <button class="btn dark" id="submitLead" type="button">Enviar</button>
            <button class="btn" id="backStep1" type="button">Volver</button>

            <div class="success hidden" id="successBox">
              <strong>¡Listo! Recibí tu evaluación.</strong>
              <p>Para acelerar, abre WhatsApp con tu mensaje prellenado y te respondo más rápido.</p>
              <a class="btn primary" id="waBtn" href="#" target="_blank" rel="noopener">Abrir WhatsApp</a>
            </div>

            <div class="sub">*Resultados varían según consumo, techo, sombras, equipos y diseño.</div>
          </div>
        </div>
      </div>
    </section>

    <div class="foot">
      <div>© <span id="y"></span> Ricardo Ortiz — Consultor Solar</div>
      <div>Minimal • Rápido • Estilo Wix</div>
    </div>

  </div>

  <script>
    // ===== Settings =====
    const WA_NUMBER = "17874005116"; // +1 787-400-5116

    // ===== Case data =====
    const cases = {
      "San Juan": {
        profile:"Residencial", goal:"Backup + ahorro", bill:"$250–$400",
        sub:"Hogar residencial • Evaluación típica • Ajuste por consumo y techo.",
        bullets:[
          "Prioridad: estabilidad durante apagones y reducir dependencia de LUMA.",
          "Se revisa consumo, cargas críticas y condición del techo.",
          "Diseño personalizado; batería opcional según necesidad."
        ]
      },
      "Bayamón": {
        profile:"Residencial", goal:"Ahorro mensual", bill:"$150–$250",
        sub:"Caso típico • Enfoque en optimizar el pago mensual según consumo.",
        bullets:[
          "Objetivo: bajar gasto sin promesas irreales.",
          "Se revisa patrón de consumo y hábitos (aires, enseres).",
          "Diseño eficiente; escalable si luego se desea batería."
        ]
      },
      "Carolina": {
        profile:"Residencial", goal:"Backup en apagones", bill:"$250–$400",
        sub:"Caso típico • Interés principal: continuidad para cargas esenciales.",
        bullets:[
          "Prioridad: cargas esenciales (nevera, luces, abanicos).",
          "Se define carga crítica y autonomía deseada.",
          "Opción de batería según evaluación."
        ]
      },
      "Caguas": {
        profile:"Residencial", goal:"Ahorro + estabilidad", bill:"$400+",
        sub:"Caso típico • Consumo alto, enfoque en estrategia de estabilidad.",
        bullets:[
          "Objetivo: reducir exposición a cambios de tarifa.",
          "Se evalúa área útil del techo y sombras.",
          "Diseño escalable y priorización (ahorro vs backup)."
        ]
      },
      "Ponce": {
        profile:"Residencial", goal:"Ahorro", bill:"$150–$250",
        sub:"Caso típico • Balance costo-beneficio según uso real.",
        bullets:[
          "Objetivo: maximizar costo-beneficio.",
          "Se evalúa consumo promedio y techo disponible.",
          "Diseño ajustado; opciones según presupuesto."
        ]
      },
      "Mayagüez": {
        profile:"Residencial", goal:"Backup + ahorro", bill:"$250–$400",
        sub:"Caso típico • Enfoque mixto: continuidad + control.",
        bullets:[
          "Prioridad: estabilidad y planificación.",
          "Se revisa consumo y cargas críticas.",
          "Diseño personalizado; batería opcional."
        ]
      },
      "Arecibo": {
        profile:"Residencial", goal:"Ahorro", bill:"$0–$150",
        sub:"Caso típico • Consumo moderado, enfoque en eficiencia.",
        bullets:[
          "Objetivo: bajar gasto de forma simple.",
          "Evaluación rápida de consumo + techo.",
          "Diseño eficiente para consumo moderado."
        ]
      },
      "Humacao": {
        profile:"Residencial", goal:"Backup", bill:"$250–$400",
        sub:"Caso típico • Respaldo como prioridad.",
        bullets:[
          "Prioridad: continuidad por interrupciones.",
          "Se define carga crítica para backup.",
          "Opción de batería según evaluación."
        ]
      },
      "Coamo": {
        profile:"Residencial", goal:"Ahorro + backup", bill:"$150–$250",
        sub:"Caso típico • Balance entre ahorro y respaldo básico.",
        bullets:[
          "Objetivo: bajar gasto + respaldo básico.",
          "Se revisa consumo y equipos esenciales.",
          "Diseño escalable según prioridades."
        ]
      }
    };

    // ===== Map interactions =====
    const pins = document.querySelectorAll(".pin");
    const townSelect = document.getElementById("town");

    const caseTown = document.getElementById("caseTown");
    const caseSub = document.getElementById("caseSub");
    const kpiProfile = document.getElementById("kpiProfile");
    const kpiGoal = document.getElementById("kpiGoal");
    const kpiBill = document.getElementById("kpiBill");
    const caseBullets = document.getElementById("caseBullets");
    const caseCTA = document.getElementById("caseCTA");

    function renderCase(town){
      const c = cases[town] || cases["San Juan"];
      caseTown.textContent = `${town} — Caso destacado`;
      caseSub.textContent = c.sub;
      kpiProfile.textContent = c.profile;
      kpiGoal.textContent = c.goal;
      kpiBill.textContent = c.bill;

      caseBullets.innerHTML = c.bullets
        .map(b => `<div class="b"><i></i><div>${b}</div></div>`)
        .join("");

      caseCTA.textContent = `Cotizar para ${town}`;
      caseCTA.href = "#cotiza";

      // prefill town select
      const opts = Array.from(townSelect.options).map(o => o.value);
      townSelect.value = opts.includes(town) ? town : "Otro";
    }

    pins.forEach(p=>{
      p.addEventListener("click", ()=>{
        pins.forEach(x=>x.classList.remove("active"));
        p.classList.add("active");
        renderCase(p.dataset.town);
      });
    });

    // ===== Form steps + WhatsApp =====
    const step1 = document.getElementById("step1");
    const step2 = document.getElementById("step2");
    const toStep2 = document.getElementById("toStep2");
    const backStep1 = document.getElementById("backStep1");
    const submitLead = document.getElementById("submitLead");
    const successBox = document.getElementById("successBox");
    const waBtn = document.getElementById("waBtn");

    const nameEl = document.getElementById("name");
    const billEl = document.getElementById("bill");
    const phoneEl = document.getElementById("phone");
    const prefEl = document.getElementById("pref");
    const consentEl = document.getElementById("consent");

    toStep2.addEventListener("click", ()=>{
      const nm = (nameEl.value || "").trim();
      if(nm.length < 2){ nameEl.focus(); return; }
      step1.classList.add("hidden");
      step2.classList.remove("hidden");
      phoneEl.focus();
    });

    backStep1.addEventListener("click", ()=>{
      step2.classList.add("hidden");
      step1.classList.remove("hidden");
      successBox.classList.add("hidden");
    });

    submitLead.addEventListener("click", ()=>{
      const ph = (phoneEl.value || "").trim();
      if(ph.length < 7){ phoneEl.focus(); return; }
      if(!consentEl.checked){ consentEl.focus(); return; }

      const town = townSelect.value;
      const bill = billEl.options[billEl.selectedIndex].textContent;
      const nm = (nameEl.value || "").trim();
      const pref = prefEl.value;

      const msg =
`Hola Ricardo, soy ${nm}.
Mi pueblo: ${town}.
Mi factura LUMA: ${bill}.
Prefiero: ${pref}.
¿Me puedes orientar con una evaluación solar?`;

      waBtn.href = `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`;
      successBox.classList.remove("hidden");
      successBox.scrollIntoView({behavior:"smooth", block:"nearest"});
    });

    // init
    renderCase("San Juan");
    document.getElementById("y").textContent = new Date().getFullYear();
  </script>
</body>
</html>
